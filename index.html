<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Visualizing World Values</title>

    <!-- Main CSS file -->
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
    <link rel="stylesheet" type="text/css" href="dot-matrix/DotMatrix.css" />
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/themes/smoothness/jquery-ui.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.ui.touch-punch/0.2.3/jquery.ui.touch-punch.min.js"></script>

    <!-- D3 -->
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/topojson.v1.min.js"></script>
    <script src="https://d3js.org/d3-color.v1.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
    <!--<script src="/dot-matrix/DotMatrix.js"></script>-->
</head>

<body>

    <!-- Tab links -->
    <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'Trail1')">Analytic Trail 1</button>
        <button class="tablinks" onclick="openTab(event, 'Trail2')">Analytic Trail 2</button>
        <button id="vis-button" class="tablinks" onclick="openTab(event, 'Visualization')">Visualization Tools</button>
    </div>
    <!-- Tab content -->
    <div id="Trail1" class="tabcontent">
        <p>
            Do all the countries in the world have the same average feeling of happiness?
            Are their differences related to their wealth and living conditions?
            Or is it because of their way of understanding life?
        </p>
        <h3>Analytic trail from World Values Survey online tools</h3>
        <p>
            Let’s start by looking at the most recent wave period, 2010-2014.
            Then, we have to select which countries we want to visualize and compare and one variable.
            Here I selected Egypt, Germany, South Africa and Spain and the “feeling of happiness”.
        </p>
        <p>The image below shows the distribution in each of the countries.</p>

        <img src="/ivis-world-values/screenshots/HappinessXcountry.jpg" alt="This was a photo" />

        <p>From that visualization we get some insights: the country with more percentage of “very happy” population is South Africa. Germany and Spain are predominant at “rather happy”, and Egypt has a shocking majority of “not at all happy”.</p>
        <p>With the aim of getting more insights into what happened in Egypt for such terrifying results, we can visualize its evolution over the years.</p>
        <img src="/ivis-world-values/screenshots/HappinessEgyptTime.jpg" />

        <p>
            The graphic shows that for previous years the feeling of happiness was more in line with the other countries, and it was only in the last period when it dramatically fell.
            Certainly, it was due to the big <a href="https://en.wikipedia.org/wiki/Egyptian_crisis_(2011%E2%80%9314)#Economy"
        </p>crisis</a> the country suffered from 2011 until 2014.</p>

        <p>The map visualization allows us to see an overview of all countries’ happiness index through color gradients. Although, it fails with negative values, like for Egypt.</p>
        <img src="/ivis-world-values/screenshots/HappinessMap.jpg" />
        <!--<p>Then, I searched for the first aim the participats from each country and the results confirmed even more my hypothesis.</p>
    <img src="/screenshots/AimsEgypt.jpg" />-->
        <p>
            If I want to see other parameters like the importance of family, work, religion or politics I have to follow the same steps again.
            However, there is no way of relating more than one variable at once.
        </p>

        <h3>Analytic trail using my new tool</h3>
        <p>The first look at this new visualization tool shows an overview of the feeling of happiness around the world for a specific year by means of a color gradient. By moving the slider below the map we get the evolution of this variable over the time.</p>
        <img src="/ivis-world-values/screenshots/.jpg" />
        <p>Now, we can see more insights about the distribution of this variable in each country by selecting them on the map.</p>

        <p>
            The pictograms appear in happiness ascending order by default, but can be changed by selecting other sorting criteria.
            To see the relation between happiness and the important aspects in life for each country, we can now change our variable selected. Let’s see the importance of religion.
        </p>
        <img src="/ivis-world-values"/>
        <p>The pictograms of each country are still sorted by their happiness index, so here we can observe a relation between happiness and religion.</p>

        <p>With that selection of countries it is possible to change variables and time and quickly see the results.</p>

        <h3>Learnings from this project</h3>
        <p>
            This project has supposed a challenge for me in several aspects. As a novice front-end programmer with no experience with asynchronous programming, Javascript and the problem of reading files has been  the cause of many conflicts that I have learnt how to solve. However, I am aware of all the improvements my code could have after further developing my skills in this field.
            D3 is a complex library not always intuitive and hard to master, but I feel that after working in this project I have gained more confidence with it.
            Dealing with complex databases and combining those with different structures has also been a practice along the development of the project, as well as the analysis of different data transformations and mapping to appropriate visual structures and views.
        </p>

    </div>

    <div id="Trail2" class="tabcontent">
        <h3>My Analytic Trail</h3>
        <p>Here I will put the analytic trail based on my own visualizations.</p>
        <p>Pictogram from: <a href="http://bl.ocks.org/alansmithy/d832fc03f6e6a91e99f4">Alan Smith</a></p>
        <p>Choropleth Map from: <a href="http://bl.ocks.org/michellechandra/0b2ce4923dc9b5809922">Michelle Chandra</a></p>
    </div>

    <div id="Visualization" class="tabcontent">
    
        <div class="firstColumn">
            <div class="question-section">How important in life is...?</div>
            <button id="Family" class="btn" onclick="changeVariable(event, this.id,wave)">Family</button>
            <button id="Friends" class="btn" onclick="changeVariable(event, this.id,wave)">Friends</button>
            <button id="Religion" class="btn" onclick="changeVariable(event, this.id,wave)">Religion</button>
            <button id="Leisure" class="btn" onclick="changeVariable(event, this.id,wave)">Leisure</button>
            <button id="Work" class="btn" onclick="changeVariable(event, this.id,wave)">Work</button>
            <button id="Politics" class="btn" onclick="changeVariable(event, this.id,wave)">Politics</button>

            <div id="map-container">
                <div id="map-holder"></div>
                <div id="legend1"></div>
                <div id="year-range" class="slider"></div>
                <div height="100px" width="100%">Timeline</div>
            </div>
        </div>
        
        <div class="secondColumn">
            <div class="question-section">Sorted by:</div>
            <button id="Happiness" class="btn" onclick="changeVariable(event, this.id,wave)">Happiness</button>
            <button id="GDP" class="btn" onclick="getAvgDataGap(this.id, wave)">Income</button>

            <button id="Clear" class="btn" onclick="clearCountries()">Clear countries</button>
            <select id="sort-list" onchange="getSortBy(this)">
                <option value="asc">Happiness asc</option>
                <option value="desc">Happiness desc</option>
            </select>

            <div id="Pictogram"></div>
            <div id="Legend"></div>
        </div>
                
    </div>

    <!-- Main js file -->
    <script src="pictogram.js"></script>
    <script src="main.js"></script>

</body>
</html>
